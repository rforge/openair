<html><head><title>~~function to do ... ~~</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="Rchm.css">
</head>
<body>

<table width="100%"><tr><td>trend.hour.weekday(openair)</td><td align="right">R Documentation</td></tr></table><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
<param name="keyword" value="R:   trend.hour.weekday">
<param name="keyword" value=" ~~function to do ... ~~">
</object>


<h2>~~function to do ... ~~</h2>


<h3>Description</h3>

<p>
~~ A concise (1-5 lines) description of what the function does. ~~
</p>


<h3>Usage</h3>

<pre>
trend.hour.weekday(mydata, pollutant = "nox", limits = c(0, 100), line.colour = "darkorange2", fill.colour = "lightgoldenrod", ylab = pollutant, main = "", auto.text = TRUE, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>mydata</code></td>
<td>
~~Describe <code>mydata</code> here~~ </td></tr>
<tr valign="top"><td><code>pollutant</code></td>
<td>
~~Describe <code>pollutant</code> here~~ </td></tr>
<tr valign="top"><td><code>limits</code></td>
<td>
~~Describe <code>limits</code> here~~ </td></tr>
<tr valign="top"><td><code>line.colour</code></td>
<td>
~~Describe <code>line.colour</code> here~~ </td></tr>
<tr valign="top"><td><code>fill.colour</code></td>
<td>
~~Describe <code>fill.colour</code> here~~ </td></tr>
<tr valign="top"><td><code>ylab</code></td>
<td>
~~Describe <code>ylab</code> here~~ </td></tr>
<tr valign="top"><td><code>main</code></td>
<td>
~~Describe <code>main</code> here~~ </td></tr>
<tr valign="top"><td><code>auto.text</code></td>
<td>
~~Describe <code>auto.text</code> here~~ </td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
~~Describe <code>...</code> here~~ </td></tr>
</table>

<h3>Details</h3>

<p>
~~ If necessary, more details than the description above ~~
</p>


<h3>Value</h3>

<p>
~Describe the value returned
If it is a LIST, use
</p>
<table summary="R argblock">
<tr valign="top"><td><code>comp1 </code></td>
<td>
Description of 'comp1'</td></tr>
<tr valign="top"><td><code>comp2 </code></td>
<td>
Description of 'comp2'</td></tr>
</table>
<p>

...</p>

<h3>Warning</h3>

<p>
....
</p>


<h3>Note</h3>

<p>
~~further notes~~ 
</p>
<p>
~Make other sections like Warning with section{Warning }{....} ~
</p>


<h3>Author(s)</h3>

<p>
~~who you are~~
</p>


<h3>References</h3>

<p>
~put references to the literature/web site here ~
</p>


<h3>See Also</h3>

<p>
~~objects to See Also as <code><a onclick="findlink('utils', 'help.html')" style="text-decoration: underline; color: blue; cursor: hand">help</a></code>, ~~~
</p>


<h3>Examples</h3>

<pre>
##---- Should be DIRECTLY executable !! ----
##-- ==&gt;  Define data, use random,
##--    or do  help(data=index)  for the standard data sets.

## The function is currently defined as
function(mydata,
                pollutant = "nox",
                limits = c(0, 100),
                line.colour = "darkorange2",
                fill.colour = "lightgoldenrod",
                                ylab = pollutant,
                                main = "",
                                auto.text = TRUE,...) {
    library(lattice)
    library(latticeExtra)
    library(Hmisc)

trend.hour.weekday.plot &lt;- function(mydata, pollutant, limits, line.colour,
                fill.colour,...) {

    #extract variables of interest
    vars &lt;- c("date", pollutant)
    mydata &lt;- mydata[, vars]
    mydata &lt;- mydata[order(mydata$date), ]
    
    colnames(mydata)[2] &lt;- "conc"

    year &lt;- as.factor(format(mydata$date,"%Y"))
    hour &lt;- as.numeric(format(mydata$date,"%H"))
    weekday &lt;- format(mydata$date, "%A")
    
    mydata &lt;- cbind(mydata, year, weekday, hour)

    #summarize data
    s &lt;- summarize(mydata$conc, llist(year, weekday, hour), smean.cl.normal)
    
    s$weekday &lt;- ordered(s$weekday, levels = c("Monday", "Tuesday",
                  "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"))

  xyplot(mydata.conc ~ hour | year + weekday,
      data = s,
      col = line.colour,
      type = "l",
      as.table = TRUE,
          main = quick.text(main, auto.text),
          ylab = quick.text(ylab, auto.text),
      scales = list(x = list(at = seq(0, 24, 6))),
      xlab = "hour of day",...,

      panel = function(x, y, subscripts,...) {

      #for polygon
        x1 &lt;- s$hour[subscripts]
        x2 &lt;- x1
        y1 &lt;- s$Lower[subscripts]
        y2 &lt;- s$Upper[subscripts]

        #clever polygon that can handle missing data
          for(i in seq(2, length(x1)))

          if (!any(is.na(y2[c(i - 1, i)]))){
            lpolygon(c(x1[i - 1], x1[i], x2[i], x2[i-1]),
                c(y1[i - 1], y1[i], y2[i], y2[i-1]),
                col = fill.colour, border = 0) }

              panel.grid(h = -1, v = 0, lwd = 0.5, col = "grey85")
              panel.abline(v = seq(0, 24, 6), col = "grey85")
              panel.xyplot(x, y, lwd = 2,...)
      }
)}

plt &lt;- trend.hour.weekday.plot(mydata, pollutant, limits, line.colour,
                fill.colour,...)

    useOuterStrips(plt, strip = strip.custom(par.strip.text = list(cex = 0.8)),
    strip.left = strip.custom(par.strip.text = list(cex = 0.8)))
  }
</pre>

<script Language="JScript">
function findlink(pkg, fn) {
var Y, link;
Y = location.href.lastIndexOf("\\") + 1;
link = location.href.substring(0, Y);
link = link + "../../" + pkg + "/chtml/" + pkg + ".chm::/" + fn;
location.href = link;
}
</script>


<hr><div align="center">[Package <em>openair</em> version 1.0 <a href="00Index.html">Index]</a></div>

</body></html>
